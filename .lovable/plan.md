
# خطة إضافة بيانات العنوان الوطني للعميل

## ملخص
إضافة حقول العنوان الوطني السعودي في ملف العميل ضمن تبويب البيانات الأساسية

---

## الحقول المطلوبة

| الحقل | العمود في قاعدة البيانات | النوع |
|-------|--------------------------|-------|
| الرقم الضريبي | `tax_number` | text |
| اسم الشارع | `street_name` | text |
| رقم المبنى | `building_number` | text |
| الرقم الفرعي | `secondary_number` | text |
| الحي | `district` | text |
| المدينة | `city` | موجود مسبقاً |
| الرمز البريدي | `postal_code` | text |

---

## التصميم المقترح

```text
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 العنوان الوطني                                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  الرقم الضريبي                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 300000000000003                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌──────────────────────┐  ┌──────────────────────┐            │
│  │ رقم المبنى           │  │ الرقم الفرعي         │            │
│  │ 1234                 │  │ 5678                 │            │
│  └──────────────────────┘  └──────────────────────┘            │
│                                                                 │
│  اسم الشارع                                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ شارع الملك فهد                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌──────────────────────┐  ┌──────────────────────┐            │
│  │ الحي                 │  │ الرمز البريدي        │            │
│  │ العليا               │  │ 12345                │            │
│  └──────────────────────┘  └──────────────────────┘            │
│                                                                 │
│  المدينة                                                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ الرياض                                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## التفاصيل التقنية

### 1. تحديث قاعدة البيانات

```sql
ALTER TABLE client_organizations 
ADD COLUMN IF NOT EXISTS tax_number text,
ADD COLUMN IF NOT EXISTS street_name text,
ADD COLUMN IF NOT EXISTS building_number text,
ADD COLUMN IF NOT EXISTS secondary_number text,
ADD COLUMN IF NOT EXISTS district text,
ADD COLUMN IF NOT EXISTS postal_code text;
```

### 2. تحديث BasicInfoTab.tsx

- إضافة الحقول الجديدة في الـ interface
- إضافة الحقول في الـ form state
- إضافة الحقول في دالة handleSave
- إضافة كارد جديد "العنوان الوطني" مع أيقونة MapPin
- عرض الحقول في وضع التعديل ووضع العرض

### 3. تحديث CustomerProfilePage.tsx

- إضافة الحقول الجديدة في استعلام جلب بيانات المؤسسة

---

## الملفات المتأثرة

| الملف | نوع التغيير |
|-------|-------------|
| قاعدة البيانات | Migration جديد |
| `BasicInfoTab.tsx` | تحديث - إضافة كارد العنوان الوطني |
| `CustomerProfilePage.tsx` | تحديث - جلب الحقول الجديدة |

---

## خطوات التنفيذ

1. إنشاء Migration لإضافة الأعمدة الجديدة
2. تحديث BasicInfoTab لإضافة قسم العنوان الوطني
3. تحديث CustomerProfilePage لجلب البيانات الجديدة
