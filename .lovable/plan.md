

# خطة: تبسيط نموذج إدارة الخطط مع الإبقاء على إعدادات الضريبة

## الملخص
إعادة تصميم نموذج إدارة الخطط ليكون بسيطا وواضحا وفق مبدأ "سعر واحد فقط"، مع إزالة التفاصيل الحسابية من نموذج الإدخال فقط، والإبقاء على قسم إعدادات الضريبة (VAT Settings) كما هو.

---

## التغييرات المطلوبة

### 1. الإبقاء على إعدادات الضريبة (VAT Settings)
- بطاقة إعدادات ضريبة القيمة المضافة تبقى كما هي بدون أي تعديل
- النسبة تُستخدم داخليا في عروض الأسعار والفواتير

### 2. إعادة تصميم نموذج الخطة (Plan Modal)

**الحقول المعتمدة فقط:**
- اسم الخطة
- الوصف
- السعر السنوي (حقل رقمي واحد فقط)
- تفعيل الاشتراك الشهري (Switch) - السعر الشهري يُحسب تلقائيا
- تفعيل الخصم السنوي (Switch) + نسبة الخصم %
- المميزات (سطر لكل ميزة)
- حالة الخطة (نشطة / غير نشطة)

**ما سيتم حذفه من النموذج فقط:**
- حقل السعر الشهري اليدوي (يُحسب تلقائيا)
- حقل الاسم بالإنجليزية
- صناديق التفاصيل الضريبية (TaxBreakdown) داخل النموذج
- عروض "قبل الضريبة" و"الضريبة" داخل النموذج

**إضافة تنبيه ثابت في النموذج:**
> "جميع الأسعار شاملة ضريبة القيمة المضافة. الحسابات تتم تلقائيا."

### 3. تبسيط جدول عرض الخطط
- إزالة أسطر "قبل الضريبة" من جدول الخطط
- عرض: اسم الخطة، السعر السنوي، الشهري (محسوب)، الخصم، الحالة

### 4. تبسيط نماذج الخدمات والحلول والرسوم السنوية
- إزالة مكون TaxBreakdown من نموذج الخدمات
- إزالة مكون TaxBreakdown من نموذج الحلول المخصصة
- إزالة أسطر "قبل الضريبة" من جداول العرض

### 5. حساب السعر الشهري (تلقائي عند الحفظ)

```text
السعر الشهري = (السعر السنوي / 12) + علاوة شهرية (~15%)
```

يُحفظ تلقائيا دون تدخل المستخدم.

---

## التفاصيل التقنية

### الملف المتأثر
**`src/pages/admin/PricingSettingsPage.tsx`** فقط:

1. **الإبقاء على:** بطاقة VAT Settings + state + query + mutation الخاصة بها
2. **حذف من نموذج الخطة:**
   - حقل `name_en`
   - حقل `monthly_price` اليدوي
   - مكونات `TaxBreakdown` داخل نموذج الخطة
3. **حذف من نماذج الخدمات والحلول:**
   - مكونات `TaxBreakdown`
4. **حذف من جداول العرض:**
   - أسطر "قبل الضريبة" من جميع الجداول (خطط، خدمات، حلول، رسوم سنوية)
5. **تعديل دالة الحفظ:**
   - حساب `monthly_price` تلقائيا من `yearly_price`
6. **إضافة تنبيه:** نص ثابت أعلى النموذج

### تخطيط النموذج الجديد

```text
+------------------------------------------+
| [تنبيه: جميع الأسعار شاملة الضريبة]     |
+------------------------------------------+
| اسم الخطة          |    الوصف            |
+------------------------------------------+
| السعر السنوي (شامل الضريبة)             |
+------------------------------------------+
| [x] اشتراك شهري   | [x] خصم سنوي [%]   |
+------------------------------------------+
| المميزات (سطر لكل ميزة)  | [x] نشطة    |
+------------------------------------------+
|              إلغاء  |  حفظ              |
+------------------------------------------+
```

